## OWASP top10有哪些？
<img src=https://github.com/n4ttt/Sec-Note/blob/main/Image/owasp.png>
### A1:2017-注入
将不受信任的数据作为命令或查询的一部分发送到解析器时，会产生诸如SQL注入、NoSQL注入、OS注入和LDAP注入的注入缺陷。</br>
SQL注入等；防御对用户传入信息进行过滤，数据库权限控制，web目录权限控制等。</br>
原理：用户输入的内容传到web应用，没有经过过滤或者严格的过滤，被带入到了数据库中进行执行</br>
条件：用户能够控制自己的输入，没有严格过滤</br>
修复：</br>
（1）用户输入验证</br>
（2）关键字转义</br>
（3）加密敏感数据</br>
（4）数据库权限控制：根据程序要求为特定的表设置特定的权限，如程序只需要select权限则只赋予select查询权限；</br>
（5）目录权限限制：WEB目录应至少遵循“可写目录不可执行，可执行目录不可写”的原则。</br>

### A2:2017-失效的身份认证
通常，通过错误使用应用程序的身份认证和会话管理功能，攻击者能够破译密码、密钥或会话令牌，或者利用其它开发缺陷来暂时性或永久性冒充其他用户的身份。</br>
例如弱密码、允许暴力破解等，使用弱密码检查，增强密码复杂性，进行多因素身份认证等防御

### A3:2017-敏感数据泄露
数据是否是明文传输，HTTP/FTP；防御是传输加密，确保敏感数据被加密。

### A4:2017-XML 外部实体（XXE）
应用程序直接接收XML文件；防御禁用XML外部实体和DTD进程。

### A5:2017-失效的访问控制
未对通过身份验证的用户实施恰当的访问控制。攻击者可以利用这些缺陷访问未经授权的功能或数据，例如：访问其他用户的帐户、查看敏感文件、修改其他用户的数据、更改访问权限等。</br>
如未验证身份的用户浏览需要通过身份验证的页面，特权访问等。防御可以使用一次性的访问控制机制；对API访问进行速率限制。

### A6:2017-安全配置错误
安全配置错误是最常见的安全问题，这通常是由于不安全的默认配置、不完整的临时配置、开源云存储、错误的HTTP 标头配置以及包含敏感信息的详细错误信息所造成的。因此，我们不仅需要对所有的操作系统、框架、库和应用程序进行安全配置，而且必须及时修补和升级它们。</br>
应用程序启用或安装了不必要的功能（不必要的端口、服务、网页或权限）等等，随时检查和修复安全配置项，更新和打补丁。

### A7:2017- 跨站脚本（XSS）
1、分类：</br>
**反射性**：非持久性、参数型的跨站脚本。JS代码在web应用的参数中，如搜索框等。</br>
**存储型**：持久性跨站脚本，危害最大。它是将恶意代码写进数据库或文件中，常见于留言板发表评论、文章的一些地方（数据写入的地方）</br>
**DOM型**：输出点在DOM，通过URL传入参数去控制触发的。</br>
2、危害：</br>
（1）窃取用户cookie，键盘记录</br>
（2）XSS配合其他漏洞getshell</br>
（3）刷流量，执行弹窗广告，强制发送电子邮件</br>
（4）传播蠕虫病毒</br>
3、防御：</br>
对所有不可信的HTTP请求数据进行适当转义；</br>
敏感数据进行编码；</br>
（1）基于特征的的防御（关键字匹配，特征匹配）：对所有提交信息进行规则匹配检查；</br>
（2）基于代码修改的防御。

### A8:2017-不安全的反序列化
不安全的反序列化会导致远程代码执行。即使反序列化缺陷不会导致远程代码执行，攻击者也可以利用它们来执行攻击，包括：重播攻击、注入攻击和特权升级攻击。</br>
**Java反序列化漏洞**</br>
由于很多站点或者RMI仓库等接口处存在java的反序列化功能，攻击者可以通过构造特定的恶意对象序列化后的流，让目标反序列化，从而达到自己的恶意预期行为，包括命令执行，甚至getshell等等。</br>
Apache Commons Collections是一个Collections收集器框架，其中接口类InvokerTransformer可以通过调用java的反射机制来调用任意函数。这个框架的使用导致了Java反序列化的流行。</br>
防御：在InvokerTransformer进行反序列化之前进行一个安全检查

### A9:2017-使用含有已知漏洞的组件
组件（例如：库、框架和其他软件模块）拥有和应用程序相同的权限。如果应用程序中含有已知漏洞的组件被攻击者利用，可能会造成严重的数据丢失或服务器接管。同时，使用含有已知漏洞的组件的应用程序和API可能会破坏应用程序防御、造成各种攻击并产生严重影响。</br>
组件没有及时更新，或者软件不再支持；防御，从官方获取组件，及时看官网文档公告。</br>
CVE-2017-5638，一个Struts2远程执行漏洞，可以在服务端远程执行代码。

### A10:2017-不足的日志记录和监控
不足的日志记录和监控，以及事件响应缺失或无效的集成，使攻击者能够进一步攻击系统、保持持续性或转向更多系统，以及篡改、提取或销毁数据。大多数缺陷研究显示，缺陷被检测出的时间超过200天，且通常通过外部检测方检测，而不是通过内部流程或监控检测。rootkit 就是黑客为了销毁日志和监控。</br>
攻击者依靠监控的不足和响应的不及时来达成目的而不被知晓。</br>
未记录可审计事件，如登录成功与失败、高额交易；</br>
告警和错误事件未能产生清晰日志信息；</br>
确保所有敏感操作，都有记录可查。
